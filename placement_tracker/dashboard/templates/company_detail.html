{% extends 'base.html' %}
{% block content %}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

<style>
    /* RESTORED ORIGINAL STYLES */
    .glass-card {
        background: rgba(255, 255, 255, 0.7);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.3);
        border-radius: 1.5rem;
        padding: 2rem;
        transition: all 0.3s ease;
    }

    .detail-icon {
        width: 45px;
        height: 45px;
        background: var(--primary-light);
        color: var(--primary);
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 1rem;
    }

    .compatibility-meter {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        background: conic-gradient(var(--primary) 82%, #e2e8f0 0);
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
    }

    .compatibility-meter::after {
        content: "82%";
        position: absolute;
        width: 80px;
        height: 80px;
        background: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 800;
        font-size: 1.2rem;
    }

    .step-item {
        position: relative;
        padding-left: 30px;
        margin-bottom: 15px;
        border-left: 2px solid #e2e8f0;
    }
    .step-item::before {
        content: "";
        position: absolute;
        left: -9px;
        top: 0;
        width: 16px;
        height: 16px;
        border-radius: 50%;
        background: var(--primary);
    }

    body.dark-theme .glass-card { background: rgba(30, 41, 59, 0.7); }
    body.dark-theme .compatibility-meter::after { background: #1e293b; color: white; }
</style>

<div class="animate__animated animate__fadeIn">
    
    <div class="d-flex flex-column flex-md-row justify-content-between align-items-md-center mb-5">
        <div class="d-flex align-items-center gap-4">
            <div class="bg-white p-3 rounded-4 shadow-sm" style="width: 80px; height: 80px; display: flex; align-items: center; justify-content: center;">
                <h2 class="mb-0 fw-bold text-primary">{{ company.name|slice:":1" }}</h2>
            </div>
            <div>
                <h2 class="fw-extrabold mb-1">{{ company.name }}</h2>
                <div class="d-flex gap-2">
                    <span class="badge bg-soft-success text-success px-3 rounded-pill">Product Based</span>
                    <span class="badge bg-soft-primary text-primary px-3 rounded-pill">Tier 1</span>
                </div>
            </div>
        </div>
        <div class="text-md-end mt-3 mt-md-0">
            <button class="btn btn-primary rounded-pill px-4 fw-bold shadow-sm">
                <i class="fas fa-plus me-2"></i> Track Application
            </button>
        </div>
    </div>

    <div class="row g-4">
        <div class="col-lg-8">
            <div class="glass-card mb-4 shadow-sm">
                <h5 class="fw-bold mb-4"><i class="fas fa-info-circle me-2 text-primary"></i>Company Overview</h5>
                <p class="text-muted leading-relaxed">
                    {{ company.description }}
                </p>
                <hr class="my-4 opacity-50">
                <div class="row text-center">
                    <div class="col-4">
                        <small class="text-muted d-block">Position</small>
                        <span class="fw-bold">{{ company.positions }}</span>
                    </div>
                    <div class="col-4 border-start">
                        <small class="text-muted d-block">Location</small>
                        <span class="fw-bold">Bangalore / Remote</span>
                    </div>
                    <div class="col-4 border-start">
                        <small class="text-muted d-block">Salary Range</small>
                        <span class="fw-bold text-success">14 - 22 LPA</span>
                    </div>
                </div>
            </div>

            <div class="row g-4 mb-4">
                <div class="col-md-6">
                    <div class="glass-card h-100 shadow-sm">
                        <div class="detail-icon"><i class="fas fa-tools"></i></div>
                        <h6 class="fw-bold">Technical Stack</h6>
                        <p class="small text-muted mb-0">{{ company.skillset }}</p>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="glass-card h-100 shadow-sm">
                        <div class="detail-icon"><i class="fas fa-clipboard-list"></i></div>
                        <h6 class="fw-bold">Primary Responsibilities</h6>
                        <p class="small text-muted mb-0">{{ company.tasks }}</p>
                    </div>
                </div>
            </div>

            <div class="row g-4">
                <div class="col-md-6">
                    <div class="glass-card h-100 shadow-sm">
                        <h6 class="fw-bold mb-4"><i class="fas fa-history me-2 text-primary"></i>Interview Process</h6>
                        <div class="step-item">
                            <span class="fw-bold small d-block">Phase 1: Resume Shortlisting</span>
                            <small class="text-muted">Focus on AI/ML keywords.</small>
                        </div>
                        <div class="step-item">
                            <span class="fw-bold small d-block">Phase 2: Online Assessment</span>
                            <small class="text-muted">3 DSA (Medium) + 20 MCQs.</small>
                        </div>
                        <div class="step-item">
                            <span class="fw-bold small d-block">Phase 3: Technical Interviews</span>
                            <small class="text-muted">Focus on OS, DBMS, and System Design.</small>
                        </div>
                        <div class="step-item border-0 mb-0">
                            <span class="fw-bold small d-block">Phase 4: HR Discussion</span>
                            <small class="text-muted">Culture fit and salary.</small>
                        </div>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="glass-card h-100 shadow-sm">
                        <h6 class="fw-bold mb-4"><i class="fas fa-lightbulb me-2 text-primary"></i>Recommended Prep</h6>
                        <p class="small text-muted mb-4">Uplinking to external modules for {{ company.name }} pattern.</p>
                        
                        <div class="p-3 border rounded-4 d-flex align-items-center gap-3 mb-3 bg-white shadow-sm">
                            <div class="bg-primary text-white p-2 rounded-3"><i class="fas fa-vial"></i></div>
                            <div>
                                <span class="d-block fw-bold small">Company Mock Test</span>
                                <a href="https://www.geeksforgeeks.org/explore?page=1&sortBy=submissions" 
                                   target="_blank" class="x-small text-decoration-none text-primary fw-bold">
                                   Start Real Test <i class="fas fa-external-link-alt ms-1" style="font-size: 0.6rem;"></i>
                                </a>
                            </div>
                        </div>

                        <div class="p-3 border rounded-4 d-flex align-items-center gap-3 bg-white shadow-sm">
                            <div class="bg-success text-white p-2 rounded-3"><i class="fas fa-code"></i></div>
                            <div>
                                <span class="d-block fw-bold small">Relevant DSA Problems</span>
                                <a href="https://leetcode.com/problemset/all/?search={{ company.name|urlencode }}" 
                                   target="_blank" class="x-small text-decoration-none text-success fw-bold">
                                   Solve on LeetCode <i class="fas fa-external-link-alt ms-1" style="font-size: 0.6rem;"></i>
                                </a>
                            </div>
                        </div>
                        
                        <div class="mt-4 p-2 bg-light rounded-3 border-dashed text-center">
                            <p class="x-small text-muted mb-0">Links updated for <b>{{ company.name }}</b> pattern.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-4">
            <div class="glass-card text-center mb-4 shadow-sm border-primary sticky-top" style="top: 2rem;">
                <h6 class="fw-bold mb-3">Prep-Match Score</h6>
                <div class="compatibility-meter mx-auto mb-3"></div>
                <p class="small text-muted mb-0 px-3">Your skills match 82% of this company's requirements. Review **{{ company.skillset|truncatewords:2 }}** to improve.</p>
            </div>
        </div>
    </div>
</div>

{% endblock %}